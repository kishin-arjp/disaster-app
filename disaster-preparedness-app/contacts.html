<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·Šæ€¥é€£çµ¡å…ˆ - ããªãƒ­ã‚°</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html">ğŸš¨ ããªãƒ­ã‚°</a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">ãƒ›ãƒ¼ãƒ </a>
                <a href="emergency-bag.html" class="nav-link">é˜²ç½ãƒãƒƒã‚°</a>
                <a href="contacts.html" class="nav-link active">ç·Šæ€¥é€£çµ¡å…ˆ</a>
                <a href="evacuation.html" class="nav-link">é¿é›£å ´æ‰€</a>
                <a href="tips.html" class="nav-link">é˜²ç½çŸ¥è­˜</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <div>
                    <h1>ç·Šæ€¥é€£çµ¡å…ˆ</h1>
                    <p>ç½å®³æ™‚ã®é‡è¦ãªé€£çµ¡å…ˆã‚’è¨˜éŒ²ãƒ»ç®¡ç†ã—ã¾ã—ã‚‡ã†</p>
                </div>
                <button class="btn btn-primary" onclick="showAddContactForm()">
                    â• é€£çµ¡å…ˆè¿½åŠ 
                </button>
            </div>

            <div id="add-contact-form" class="card" style="display: none;">
                <div class="card-header">
                    <h2>æ–°ã—ã„é€£çµ¡å…ˆã‚’è¿½åŠ </h2>
                </div>
                <div class="card-content">
                    <form id="contact-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="contact-name">åå‰</label>
                                <input type="text" id="contact-name" placeholder="ä¾‹: ç”°ä¸­å¤ªéƒ" required>
                            </div>
                            <div class="form-group">
                                <label for="contact-relationship">ç¶šæŸ„ãƒ»é–¢ä¿‚</label>
                                <input type="text" id="contact-relationship" placeholder="ä¾‹: å®¶æ—ã€å‹äººã€è·å ´">
                            </div>
                            <div class="form-group">
                                <label for="contact-phone">é›»è©±ç•ªå·</label>
                                <input type="tel" id="contact-phone" placeholder="ä¾‹: 090-1234-5678" required>
                            </div>
                            <div class="form-group">
                                <label for="contact-email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                                <input type="email" id="contact-email" placeholder="ä¾‹: example@email.com">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact-address">ä½æ‰€</label>
                            <input type="text" id="contact-address" placeholder="ä¾‹: æ±äº¬éƒ½æ¸‹è°·åŒº...">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">è¿½åŠ </button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddContactForm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="contacts-grid" class="items-grid">
                <!-- é€£çµ¡å…ˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        const defaultContacts = [
            {
                id: '1',
                name: 'è­¦å¯Ÿ',
                relationship: 'ç·Šæ€¥é€šå ±',
                phone: '110',
                email: '',
                address: '',
                isDefault: true
            },
            {
                id: '2',
                name: 'æ¶ˆé˜²ãƒ»æ•‘æ€¥',
                relationship: 'ç·Šæ€¥é€šå ±',
                phone: '119',
                email: '',
                address: '',
                isDefault: true
            },
            {
                id: '3',
                name: 'ç½å®³ç”¨ä¼è¨€ãƒ€ã‚¤ãƒ¤ãƒ«',
                relationship: 'å®‰å¦ç¢ºèª',
                phone: '171',
                email: '',
                address: '',
                isDefault: true
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            loadContacts();
            
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addContact();
            });
        });

        function showAddContactForm() {
            document.getElementById('add-contact-form').style.display = 'block';
        }

        function hideAddContactForm() {
            document.getElementById('add-contact-form').style.display = 'none';
            document.getElementById('contact-form').reset();
        }

        function addContact() {
            const name = document.getElementById('contact-name').value;
            const relationship = document.getElementById('contact-relationship').value;
            const phone = document.getElementById('contact-phone').value;
            const email = document.getElementById('contact-email').value;
            const address = document.getElementById('contact-address').value;

            if (!name || !phone) {
                alert('åå‰ã¨é›»è©±ç•ªå·ã¯å¿…é ˆã§ã™ã€‚');
                return;
            }

            const contact = {
                id: Date.now().toString(),
                name,
                relationship,
                phone,
                email,
                address,
                isDefault: false
            };

            const contacts = getEmergencyContacts();
            contacts.push(contact);
            saveEmergencyContacts(contacts);
            
            hideAddContactForm();
            loadContacts();
        }

        function removeContact(id) {
            if (confirm('ã“ã®é€£çµ¡å…ˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const contacts = getEmergencyContacts();
                const updatedContacts = contacts.filter(contact => contact.id !== id);
                saveEmergencyContacts(updatedContacts);
                loadContacts();
            }
        }

        function loadContacts() {
            const customContacts = getEmergencyContacts();
            const allContacts = [...defaultContacts, ...customContacts];
            const contactsGrid = document.getElementById('contacts-grid');

            contactsGrid.innerHTML = '';

            allContacts.forEach(contact => {
                const contactCard = document.createElement('div');
                contactCard.className = 'item-card';
                
                contactCard.innerHTML = `
                    <div class="item-header">
                        <div>
                            <h3>${contact.name}</h3>
                            <p class="item-category">
                                ${contact.relationship}
                                ${contact.isDefault ? '<span class="badge secondary">ã‚·ã‚¹ãƒ†ãƒ </span>' : ''}
                            </p>
                        </div>
                        ${!contact.isDefault ? `
                            <button class="btn-icon btn-danger" onclick="removeContact('${contact.id}')">
                                ğŸ—‘ï¸
                            </button>
                        ` : ''}
                    </div>
                    <div class="item-content">
                        <div class="contact-info">
                            <div class="contact-item">
                                <span class="contact-icon">ğŸ“</span>
                                <a href="tel:${contact.phone}" class="contact-link">${contact.phone}</a>
                            </div>
                            ${contact.email ? `
                                <div class="contact-item">
                                    <span class="contact-icon">ğŸ“§</span>
                                    <a href="mailto:${contact.email}" class="contact-link">${contact.email}</a>
                                </div>
                            ` : ''}
                            ${contact.address ? `
                                <div class="contact-address">
                                    <p>${contact.address}</p>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                contactsGrid.appendChild(contactCard);
            });
        }
    </script>
</body>
</html>
