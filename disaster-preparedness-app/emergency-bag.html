<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜²ç½ãƒãƒƒã‚°ç®¡ç† - ããªãƒ­ã‚°</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html">ğŸš¨ ããªãƒ­ã‚°</a>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">ãƒ›ãƒ¼ãƒ </a>
                <a href="emergency-bag.html" class="nav-link active">é˜²ç½ãƒãƒƒã‚°</a>
                <a href="contacts.html" class="nav-link">ç·Šæ€¥é€£çµ¡å…ˆ</a>
                <a href="evacuation.html" class="nav-link">é¿é›£å ´æ‰€</a>
                <a href="tips.html" class="nav-link">é˜²ç½çŸ¥è­˜</a>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <div>
                    <h1>é˜²ç½ãƒãƒƒã‚°ç®¡ç†</h1>
                    <p>éå¸¸ç”¨å“ã®åœ¨åº«ã¨æœŸé™ã‚’è¨˜éŒ²ãƒ»ç®¡ç†ã—ã¾ã—ã‚‡ã†</p>
                </div>
                <button class="btn btn-primary" onclick="showAddItemForm()">
                    â• ã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ 
                </button>
            </div>

            <div id="add-item-form" class="card" style="display: none;">
                <div class="card-header">
                    <h2>æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ </h2>
                </div>
                <div class="card-content">
                    <form id="item-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="item-name">ã‚¢ã‚¤ãƒ†ãƒ å</label>
                                <input type="text" id="item-name" placeholder="ä¾‹: ç¼¶è©°ãƒ‘ãƒ³" required>
                            </div>
                            <div class="form-group">
                                <label for="item-category">ã‚«ãƒ†ã‚´ãƒª</label>
                                <select id="item-category" required>
                                    <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                                    <option value="é£Ÿæ–™å“">é£Ÿæ–™å“</option>
                                    <option value="é£²æ–™æ°´">é£²æ–™æ°´</option>
                                    <option value="åŒ»è–¬å“">åŒ»è–¬å“</option>
                                    <option value="è¡›ç”Ÿç”¨å“">è¡›ç”Ÿç”¨å“</option>
                                    <option value="å·¥å…·ãƒ»ç”¨å…·">å·¥å…·ãƒ»ç”¨å…·</option>
                                    <option value="è¡£é¡">è¡£é¡</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="item-expiry">æ¶ˆè²»æœŸé™</label>
                                <input type="date" id="item-expiry">
                            </div>
                            <div class="form-group">
                                <label for="item-quantity">æ•°é‡</label>
                                <input type="number" id="item-quantity" min="1" value="1">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="item-notes">ãƒ¡ãƒ¢</label>
                            <input type="text" id="item-notes" placeholder="ä¿ç®¡å ´æ‰€ã‚„æ³¨æ„äº‹é …ãªã©">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">è¿½åŠ </button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddItemForm()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="items-grid" class="items-grid">
                <!-- ã‚¢ã‚¤ãƒ†ãƒ ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>

            <div id="empty-state" class="empty-state" style="display: none;">
                <div class="empty-icon">ğŸ“¦</div>
                <p>ã¾ã ã‚¢ã‚¤ãƒ†ãƒ ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>ã€Œã‚¢ã‚¤ãƒ†ãƒ è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰é˜²ç½ç”¨å“ã‚’ç™»éŒ²ã—ã¾ã—ã‚‡ã†ã€‚</p>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadItems();
            
            document.getElementById('item-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addItem();
            });
        });

        function showAddItemForm() {
            document.getElementById('add-item-form').style.display = 'block';
        }

        function hideAddItemForm() {
            document.getElementById('add-item-form').style.display = 'none';
            document.getElementById('item-form').reset();
        }

        function addItem() {
            const name = document.getElementById('item-name').value;
            const category = document.getElementById('item-category').value;
            const expiryDate = document.getElementById('item-expiry').value;
            const quantity = parseInt(document.getElementById('item-quantity').value);
            const notes = document.getElementById('item-notes').value;

            if (!name || !category) {
                alert('ã‚¢ã‚¤ãƒ†ãƒ åã¨ã‚«ãƒ†ã‚´ãƒªã¯å¿…é ˆã§ã™ã€‚');
                return;
            }

            const item = {
                id: Date.now().toString(),
                name,
                category,
                expiryDate,
                quantity,
                notes
            };

            const items = getEmergencyItems();
            items.push(item);
            saveEmergencyItems(items);
            
            hideAddItemForm();
            loadItems();
        }

        function removeItem(id) {
            if (confirm('ã“ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const items = getEmergencyItems();
                const updatedItems = items.filter(item => item.id !== id);
                saveEmergencyItems(updatedItems);
                loadItems();
            }
        }

        function loadItems() {
            const items = getEmergencyItems();
            const itemsGrid = document.getElementById('items-grid');
            const emptyState = document.getElementById('empty-state');

            if (items.length === 0) {
                itemsGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            itemsGrid.style.display = 'grid';
            emptyState.style.display = 'none';
            itemsGrid.innerHTML = '';

            items.forEach(item => {
                const itemCard = document.createElement('div');
                itemCard.className = 'item-card';
                
                const expiryBadge = getExpiryBadge(item.expiryDate);
                
                itemCard.innerHTML = `
                    <div class="item-header">
                        <div>
                            <h3>${item.name}</h3>
                            <p class="item-category">${item.category}</p>
                        </div>
                        <button class="btn-icon btn-danger" onclick="removeItem('${item.id}')">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                    <div class="item-content">
                        <div class="item-detail">
                            <span>æ•°é‡:</span>
                            <span>${item.quantity}</span>
                        </div>
                        ${item.expiryDate ? `
                            <div class="item-detail">
                                <span>æœŸé™:</span>
                                <div class="expiry-info">
                                    <span>${item.expiryDate}</span>
                                    ${expiryBadge}
                                </div>
                            </div>
                        ` : ''}
                        ${item.notes ? `
                            <div class="item-notes">
                                <p>${item.notes}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                itemsGrid.appendChild(itemCard);
            });
        }

        function getExpiryBadge(expiryDate) {
            if (!expiryDate) return '';
            
            const now = new Date();
            const expiry = new Date(expiryDate);
            const diffTime = expiry.getTime() - now.getTime();
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays < 0) {
                return '<span class="badge danger">æœŸé™åˆ‡ã‚Œ</span>';
            } else if (diffDays <= 7) {
                return `<span class="badge danger">ã‚ã¨${diffDays}æ—¥</span>`;
            } else if (diffDays <= 30) {
                return `<span class="badge warning">ã‚ã¨${diffDays}æ—¥</span>`;
            } else {
                return `<span class="badge secondary">ã‚ã¨${diffDays}æ—¥</span>`;
            }
        }
    </script>
</body>
</html>
